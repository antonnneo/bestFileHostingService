openapi: 3.0.0

info:
  title: LogisticCalculator
  version: "v1"
servers:
  - url: 'http://localhost:8081/api/market'
    description: local
  - url: 'http://api.test.lan/api/market'
    description: Test server
  - url: 'http://api.prod.lan/api/market'
    description: Production server
  - url: 'http://lc-docker-01.test.cloud.croc-vol.goods.local:15700/api/market'
    description: Pretest Server

paths:
  /v2/logisticCalculationService/zone/findByDestination:
    post:
      summary: Поиск зон
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FindZonesRequest'

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ZoneResultResponse'

  /v2/logisticCalculationService/calculate/forward:
    post:
      summary: Прямой расчет, определение минимальной возможной даты доставки и доступных интервалов
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/ForwardBadRequestPVZ'
                - $ref: '#/components/schemas/ForwardRequest'


      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForwardResponseV2'
        400:
          description: not success. Коды ошибок на "https://conf.goods.ru/pages/viewpage.action?pageId=199124157"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForwardBadResponsePVZ'


  /v3/logisticCalculationService/calculate/forward:
    post:
      summary: Прямой расчет, определение минимальной возможной даты доставки и доступных интервалов с поддержкой групп доступности
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/ForwardRequest'
                - $ref: '#/components/schemas/ForwardBadRequestPVZ'

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForwardResponseV3'
        400:
          description: not success. Коды ошибок на "https://conf.goods.ru/pages/viewpage.action?pageId=199124157"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForwardBadResponseV3PVZ'


  /v2/logisticCalculationService/calculate/reverse:
    post:
      summary: Обратный расчет для выбранной даты доставки
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/ReverseRequest'
                - $ref: '#/components/schemas/ReverseBadRequestPVZ'

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReverseResponse'
        400:
          description: not success. Коды ошибок на "https://conf.goods.ru/pages/viewpage.action?pageId=199124157"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReverseBadResponsePVZ'

  /v2/logisticCalculationService/calculate/possibility:
    post:
      summary: Определение возможного исполнения корзины
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PossibilityRequest'

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PossibilityResponse'

  /v2/logisticCalculationService/calculate/possibilityOne:
    post:
      summary: Определение возможного исполнения списка оферов
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PossibilityOneRequest'

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PossibilityOneResponse'

  /v1/logisticCalculationService/setting/update:
    post:
      summary: Проверка и установка свойств Settings
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SettingsVersionRequest'

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingsVersionResponse'



components:
  schemas:
    Meta:
      type: object
      properties:
        _source:
          type: string
          example: "WEB"
        _web_transactionId:
          type: string
          example: "3fe85fb9-3739-4570-895c-3a854f47ac6c"

    Meta_:
      type: object
      properties:
        _instanceId:
          type: string
        _version:
          type: string
        _datasource:
          type: string
        _duration:
          type: string

    ForwardRequest:
      type: object
      properties:
        meta:
          $ref: '#/components/schemas/Meta'
        data:
          $ref: '#/components/schemas/ForwardRequestData'

    ForwardBadRequestPVZ:
      description: "Запрос с отсутствующим зоной доставки в location"
      type: object
      properties:
        meta:
          $ref: '#/components/schemas/Meta'
        data:
          $ref: '#/components/schemas/ForwardBadRequestData'

    FindZonesRequest:
      type: object
      properties:
        meta:
          $ref: '#/components/schemas/Meta'
        data:
          $ref: '#/components/schemas/FindZonesRequestData'

    FindZonesRequestData:
      type: object
      properties:
        destination:
          $ref: '#/components/schemas/Destination__'

    ZoneResultResponse:
      type: object
      properties:
        success:
          description: "1-успех, 0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          type: object
          properties:
            zones:
              type: array
              items:
                type: string
                example: "PVZ_PICKPOINT"
              description: "Логистические зоны"

    ForwardResponseV2:
      type: object
      properties:
        success:
          description: "1-успех, 0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          $ref: '#/components/schemas/ForwardResponseDataV2'

    ForwardResponseV3:
      type: object
      properties:
        success:
          description: "1-успех, 0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          $ref: '#/components/schemas/ForwardResponseDataV3'

    ReverseRequest:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ReverseRequestData'
        meta:
          type: object
          properties:
            source:
              type: string
              example: "OMS"

    ReverseBadRequestPVZ:
      type: object
      properties:
        explain:
          type: boolean
        agId:
          type: string
          example: 6600001
        context:
          type: object
          properties:
            deliveryId:
              type: string
              example: 895765169
            partner:
              type: string
              example: goods
        destination:
          type: object
          properties:
            id:
              type: string
              example: AG_PICKUP
            postcode:
              type: string
              example: 141021
            geocode:
              type: object
              properties:
                longitude:
                  type: string
                  example: 37.70636
                latitude:
                  type: string
                  example: 55.911804
        forwardCalculationDate:
          type: string
          format: createDate-time
          example: 2021-09-25T15:17:50+03:00
        sortingCenterShipmentDate:
          type: string
          format: createDate-time
          example: 2021-09-27T16:00:00+03:00
        zoneProcessingDays:
          type: integer
          format: int32
          example: 3
        logisticClass:
          type: string
          example: MGT
        deliveryDate:
          type: string
          format: createDate-time
          example: 2021-09-27T19:00:00+03:00
        deliveryInterval:
          type: string
          example: 10:00-18:00
        operatorId:
          type: string
          example: Sberlogistics#PVZ
        items:
          type: array
          items:
            type: object
            properties:
              itemId:
                type: integer
                format: int64
                example: 100027213346
              offerId:
                type: integer
                format: int64
                example: 2265667404
              merchantId:
                type: integer
                format: int32
                example: 7
              locationId:
                type: integer
                format: int32
                example: 12
              orderBefore:
                type: string
                format: nullable
              days:
                type: string
                format: nullable
              logisticClass:
                type: string
                example: MGT
              boxes:
                type: array
                items:
                  type: object
                  properties:
                    box:
                      type: string
                      example: 1
                    width:
                      type: integer
                      format: int32
                      example: 9
                    height:
                      type: integer
                      format: int32
                      example: 1
                    length:
                      type: integer
                      format: int32
                      example: 1
                    weight:
                      type: integer
                      format: int32
                      example: 7
                    packaging_unit:
                      type: string
                      example: см
                    weight_unit:
                      type: string
                      example: кг
              price:
                type: integer
                format: int32
                example: 100
              contentFlags:
                type: array
                items:
                  type: string


    ReverseResponse:
      type: object
      properties:
        success:
          description: "1-успех, 0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          $ref: '#/components/schemas/ReverseResponseData'

    PossibilityRequest:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PossibilityRequestData'

    PossibilityResponse:
      type: object
      properties:
        success:
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          $ref: '#/components/schemas/PossibilityResponseData'


    PossibilityOneRequest:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/PossibilityOneRequestData'

    PossibilityOneResponse:
      type: object
      properties:
        success:
          description: "1-успех, 0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          type: array
          items:
            $ref: '#/components/schemas/PossibilityOneResponseData'

    ForwardRequestData:
      type: object
      properties:
        explain:
          $ref: '#/components/schemas/Explain'
        regionCode:
          $ref: '#/components/schemas/RegionCode'
        model:
          type: string
          example: "AONE"
          description: "Режим расчета: [AONE,BDSM,SBMS]"
        calculationDate:
          $ref: '#/components/schemas/CalculationDate'
        destination:
          $ref: '#/components/schemas/Destination__'
        cart:
          type: array
          items:
            $ref: '#/components/schemas/Cart'
        context:
          $ref: "#/components/schemas/Context"

    ForwardBadRequestData:
      type: object
      properties:
        explain:
          type: integer
          example: 1
        regionCode:
          type: string
          example: DEFAULT
        model:
          type: string
          example: AONE
        calculationDate:
          type: string
          format: createDate-time
          example: 2021-01-01T12:00:27+03:00
        destination:
          type: object
          properties:
            id:
              type: string
              example: AG_PICKUP
            postcode:
              type: string
              example: 141021
            geocode:
              type: object
              properties:
                longitude:
                  type: string
                  example: 37.70636
                latitude:
                  type: string
                  example: 55.911804
        cart:
          type: array
          items:
            type: object
            properties:
              itemId:
                type: integer
                format: int32
                example: 1
              offerId:
                type: integer
                format: int32
                example: 1
              merchantId:
                type: integer
                format: int32
                example: 3
              locationId:
                type: integer
                format: int32
                example: 265
              orderBefore:
                type: string
                format: nullable
              days:
                type: string
                format: nullable
              logisticClass:
                type: string
                example: MGT
              boxes:
                type: array
                items:
                  type: object
                  properties:
                    box:
                      type: string
                      example: 1
                    width:
                      type: integer
                      format: int32
                      example: 9
                    height:
                      type: integer
                      format: int32
                      example: 1
                    length:
                      type: integer
                      format: int32
                      example: 1
                    weight:
                      type: integer
                      format: int32
                      example: 7
                    packaging_unit:
                      type: string
                      example: см
                    weight_unit:
                      type: string
                      example: кг
              price:
                type: integer
                format: int32
                example: 1000
              contentFlags:
                type: array
                items:
                  type: string
        context:
          type: object
          properties:
            customer:
              type: object
              properties:
                groups:
                  type: array
                  items:
                    type: string
            platform:
              type: string
              example: WEB





    ForwardResponseDataV2:
      type: object
      properties:
        deliverySets:
          type: array
          items:
            $ref: '#/components/schemas/DeliverySetV2'

    ForwardResponseDataV3:
      type: object
      properties:
        deliverySets:
          type: array
          items:
            $ref: '#/components/schemas/DeliverySetV3'

    ReverseRequestData:
      type: object
      properties:
        explain:
          $ref: '#/components/schemas/Explain'
        agId:
          type: string
          example: "6600001"
          description: "Id Группа доступности"
        context:
          $ref: "#/components/schemas/Context_"
        destination:
          $ref: '#/components/schemas/Destination__'
        forwardCalculationDate:
          $ref: '#/components/schemas/CalculationDate'
        sortingCenterShipmentDate:
          $ref: "#/components/schemas/ShipmentDate"
        transitShipmentDate:
          $ref: '#/components/schemas/TransitShipmentDate'
        zoneProcessingDays:
          type: integer
          example: 1
        logisticClass:
          $ref: '#/components/schemas/LogisticClass'
        deliveryDate:
          $ref: "#/components/schemas/DeliveryDate"
        deliveryInterval:
          type: string
          example: "10:00-18:00"
        operatorId:
          $ref: "#/components/schemas/OperatorId"
        items:
          type: array
          items:
            $ref: '#/components/schemas/Cart'

    ReverseResponseData:
      type: object
      properties:
        forwardCalculationDate:
          $ref: '#/components/schemas/CalculationDate'
        zone:
          example: "PVZ_PICKPOINT"
          type: string
          description: "Зона исполнителя последней мили"
        zones:
          type: array
          items:
            type: string
            example: "PVZ_PICKPOINT"
          description: "Логистические зоны"
        zoneProcessingDays:
          type: integer
          example: 1
        deliveryDate:
          $ref: "#/components/schemas/DeliveryDate"
        endOfStorageDate:
          type: string
          example: "2021-10-07T00:00:00+03:00"
          description: "До указанной даты будет храниться товар в ПВЗ"
        deliveryInterval:
          $ref: '#/components/schemas/Interval'
        merchantExecutions:
          type: array
          items:
            $ref: '#/components/schemas/MerchantExecution'
        operatorExecution:
          $ref: '#/components/schemas/OperatorExecution'
        explain:
          $ref: '#/components/schemas/Explain_'

    PossibilityRequestData:
      type: object
      properties:
        explain:
          $ref: '#/components/schemas/Explain'
        calculationDate:
          $ref: '#/components/schemas/CalculationDate'
        regionCode:
          $ref: '#/components/schemas/RegionCode'
        cart:
          type: array
          items:
            $ref: '#/components/schemas/Cart'
        context:
          $ref: "#/components/schemas/Context"

    PossibilityResponseData:
      type: object
      properties:
        regions:
          type: array
          items:
            $ref: "#/components/schemas/RegionDeliveryPossibilities"
        explain:
          $ref: '#/components/schemas/Explain_'

    PossibilityOneResponseData:
      type: object
      properties:
        offer:
          $ref: "#/components/schemas/Cart"
        regions:
          type: array
          items:
            $ref: "#/components/schemas/RegionDeliveryPossibilities"
        explain:
          $ref: '#/components/schemas/Explain_'

    PossibilityOneRequestData:
      type: object
      properties:
        explain:
          $ref: '#/components/schemas/Explain'
        calculationDate:
          $ref: '#/components/schemas/CalculationDate'
        regionCode:
          $ref: '#/components/schemas/RegionCode'
        offers:
          type: array
          items:
            $ref: '#/components/schemas/Cart'
        context:
          $ref: '#/components/schemas/Context'

    ForwardBadResponsePVZ:
      type: object
      properties:
        success:
          description: "0-неуспех"
          type: integer
          example: 0
        meta:
          $ref: '#/components/schemas/Meta_'
        error:
          $ref: '#/components/schemas/ErrorPVZ'

    ReverseBadResponsePVZ:
      type: object
      properties:
        success:
          description: "0-неуспех"
          type: integer
          example: 0
        meta:
          $ref: '#/components/schemas/Meta_'
        error:
          $ref: '#/components/schemas/ErrorPVZ'

    ErrorPVZ:
      type: object
      properties:
        message:
          type: string
          example: "Не удалось определить параметры ПВЗ AG_PICKUP"
        code:
          type: string
          example: "E_NOT_FOUND_PICKUP_POINT"
        explain:
          type: array
          items:
            example: "(   0/   0) 2022-01-19T16:52:09.798683400+05:00: ## определен режим расчета: AONE (   0/   0) 2022-01-19T16:52:09.799683200+05:00: ## Выбран режим расчета: AONE ..."
            type: string
        localizedMessage:
          type: string
          example: "Не удалось определить параметры ПВЗ AG_PICKUP"

    ForwardBadResponseV3PVZ:
      type: object
      properties:
        success:
          description: "0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        error:
          $ref: '#/components/schemas/ErrorPVZForwardV3'

    ErrorPVZForwardV3:
      type: object
      properties:
        deliverySets:
          type: array
          items:
            type: object
            properties:
              ag:
                type: object
                properties:
                  id:
                    type: string
                    example: "DEFAULT_AG"
                  title:
                    type: string
                    example: "Группа доступности по умолчанию"
                  forwardCalculationAlgorithm:
                    type: string
                    example: "CLASSIC"
                  reverseCalculationAlgorithm:
                    type: string
                    example: "CLASSIC"
              error:
                type: object
                properties:
                  message:
                    type: string
                    example: "Не удалось определить параметры ПВЗ AG_PICKUP"
                  code:
                    type: string
                    example: E_NOT_FOUND_PICKUP_POINT
                  explain:
                    type: array
                    items:
                      type: string
                      example: "(   0/   0) 2022-01-20T16:25:21.202776400+05:00: ## определен режим расчета: AONE"
                  localizedMessage:
                    type: string
                    example: "Не удалось определить параметры ПВЗ AG_PICKUP"



    Destination__:
      description: "Место доставки"
      type: object
      properties:
        id:
          example: "3072"
          type: string
          description: "Если доставка в ПВЗ, должен быть указан Location.id "
        postCode:
          type: string
          example: "141021"
        geocode:
          $ref: '#/components/schemas/Geocode'

    DestinationError__:
      description: "Место доставки"
      type: object
      properties:
        id:
          example: "AG_PICKUP"
          type: string
          description: "Если доставка в ПВЗ, должен быть указан Location.id "
        postCode:
          type: string
          example: "141021"
        geocode:
          $ref: '#/components/schemas/Geocode'

    Destination_:
      description: "Место доставки"
      type: object
      properties:
        regioneCode:
          $ref: '#/components/schemas/RegionCode'
        postCode:
          type: string
          example: "125565"
        geocode:
          $ref: '#/components/schemas/Geocode'
        pickup:
          type: boolean

    Geocode:
      type: object
      properties:
        longitude:
          type: string
          example: "37.70636"
        latitude:
          type: string
          example: "55.911804"

    Cart:
      type: object
      properties:
        itemId:
          type: integer
          example: 100000565962
        offerId:
          $ref: '#/components/schemas/OfferId'
        merchantId:
          $ref: '#/components/schemas/MerchantId'
        locationId:
          $ref: '#/components/schemas/LocationId'
        orderBefore:
          $ref: '#/components/schemas/OrderBefore'
        days:
          type: integer
          example: 3
          description: "Количество дней обработки заказа мерчантом"
        logisticClass:
          $ref: '#/components/schemas/LogisticClass'
        boxes:
          type: array
          items:
            $ref: '#/components/schemas/Box'
        price:
          $ref: '#/components/schemas/Price'
        contentFlags:
          type: array
          items:
            $ref: '#/components/schemas/ContentFlag'

    Box:
      type: object
      properties:
        box:
          type: string
          example: "1"
        width:
          type: number
          example: 27.6
        height:
          type: number
          example: 27.6
        length:
          type: number
          example: 27.6
        weight:
          type: number
          example: 27.6
        packaging_unit:
          type: string
          example: "\u0441\u043c"
        weight_unit:
          type: string
          example: "\u0441\u043c"

    Box_:
      type: object
      properties:
        width:
          type: number
          example: 27.6
        height:
          type: number
          example: 27.6
        length:
          type: number
          example: 27.6
        weight:
          type: number
          example: 27.6
        volume:
          type: number
          example: 1.0E-5

    Context:
      type: object
      properties:
        customer:
          $ref: '#/components/schemas/Customer'
        platform:
          type: string
          example: "web"

    Context_:
      type: object
      properties:
        deliveryId:
          description: "Id доставки"
          type: string
          example: "895765169"
        partner:
          type: string
          example: "goods"

    Customer:
      type: object
      properties:
        groups:
          description: "Группы покупателей"
          type: array
          items:
            type: string
            example: "SBER_PRIME"

    DeliverySetV2:
      type: object
      properties:
        deliveries:
          type: array
          items:
            $ref: '#/components/schemas/Delivery'

    DeliverySetV3:
      type: object
      properties:
        ag:
          description: "Зона доступности"
          type: object
          properties:
            id:
              description: "id зоны доступности"
              type: string
              example: "DEFAULT_AG"
            title:
              description: "Название группы доступности"
              example: "Группа доступности по умолчанию"
              type: string
            forwardCalculationAlgorithm:
              description: "алгоритм расчета [CLASSIC, HUBLESS]"
              type: string
              example: "CLASSIC"
            reverseCalculationAlgorithm:
              description: "алгоритм расчета [CLASSIC, HUBLESS]"
              type: string
              example: "CLASSIC"
        deliveries:
          type: array
          items:
            $ref: '#/components/schemas/Delivery'

    Delivery:
      type: object
      properties:
        shipments:
          type: array
          items:
            $ref: '#/components/schemas/Shipment'
        destination:
          $ref: '#/components/schemas/Destination_'
        forwardCalculationDate:
          $ref: "#/components/schemas/CalculationDate"
        sortingCenterShipmentDate:
          $ref: "#/components/schemas/ShipmentDate"
        transitShipmentDate:
          $ref: '#/components/schemas/TransitShipmentDate'
        zoneProcessingDays:
          type: integer
          example: 1
          description: "Длительность логистический обработки доставки в зоне, по данным виртуального оператора"
        logisticClass:
          $ref: '#/components/schemas/LogisticClass'
        logisticClassEx:
          type: array
          items:
            $ref: '#/components/schemas/LogisticClass'
          description: "Логистические теги доставки"
        dates:
          type: array
          items:
            description: "Возможные даты и интервалы доставки в зону"
            properties:
              dateTime:
                description: "день доставки"
                type: string
                example: "2021-10-13T00:00:00+03:00"
              intervals:
                description: "интервалы доставки"
                type: array
                items:
                  type: string
                  example: "10:00-18:00"
              serviceItems:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceItem'
          description: "Возможные даты и интервалы доставки"
        items:
          $ref: '#/components/schemas/Cart'
        explain:
          $ref: '#/components/schemas/Explain_'

    Shipment:
      description: "грузовое место"
      type: object
      properties:
        merchantId:
          $ref: '#/components/schemas/MerchantId'
        locationId:
          $ref: '#/components/schemas/LocationId'
        box:
          $ref: '#/components/schemas/Box_'

    ServiceItem:
      description: "Сервисный лот"
      type: object
      properties:
        itemId:
          description: ""
          type: string
          example: "DELIVERY-499-KGT"
        goodsId:
          description: ""
          type: string
          example: "100028300179"
        goodsName:
          description: ""
          type: string
          example: "Доставка"
        quantity:
          description: ""
          type: integer
          example: 0
        finalPrice:
          $ref: '#/components/schemas/Price'
        vatRate:
          description: "НДС"
          type: integer
          example: 20
        paymentOptions:
          type: array
          items:
            type: string
            example: "PREPAY_ONLINE"
          description: "Варианты оплаты"
        id:
          description: "id"
          type: string
          example: "DELIVERY-499-KGT"

    Interval:
      description: "Интервал"
      type: object
      properties:
        start:
          type: string
          example: "2021-04-01T17:00:00+03:00"
        end:
          type: string
          example: "2021-04-01T19:00:00+03:00"

    MerchantExecution:
      type: object
      properties:
        merchantId:
          $ref: '#/components/schemas/MerchantId'
        confirmationDate:
          type: string
          example: "2021-04-01T17:00:00+03:00"
          description: "Дата получения заказа мерчантом"
        locationExecutions:
          type: array
          items:
            $ref: '#/components/schemas/LocationExecution'
        shipmentCorrectionDays:
          $ref: '#/components/schemas/ShipmentCorrectionDays'

    LocationExecution:
      type: object
      properties:
        locationId:
          $ref: '#/components/schemas/LocationId'
        shipmentCorrectionDays:
          $ref: '#/components/schemas/ShipmentCorrectionDays'
        minimumShipmentInterval:
          description: "Минимальная дата отгрузки со склада мерчанта"
          type: object
          properties:
            start:
              type: string
              example: "2021-04-01T17:00:00+03:00"
            end:
              type: string
              example: "2021-04-01T19:00:00+03:00"
        recommendedShipmentInterval:
          description: "Рекомендуемая дата отгрузки со склада мерчанта"
          type: object
          properties:
            start:
              type: string
              example: "2021-04-01T17:00:00+03:00"
            end:
              type: string
              example: "2021-04-01T19:00:00+03:00"
        weightAndDimensionsEstimateISO:
          $ref: '#/components/schemas/Box_'

    OperatorExecution:
      type: object
      description: "Исполнитель последней мили"
      properties:
        operatorId:
          $ref: "#/components/schemas/OperatorId"
        shipmentDate:
          $ref: "#/components/schemas/ShipmentDate"
        transitShipmentDate:
          $ref: "#/components/schemas/TransitShipmentDate"
        deliveryDate:
          $ref: "#/components/schemas/DeliveryDate"

    RegionDeliveryPossibilities:
      description: "Возможные доставки до указанного региона"
      type: object
      properties:
        regionCode:
          $ref: '#/components/schemas/RegionCode'
        deliveryMethods:
          type: array
          items:
            $ref: "#/components/schemas/RegionDeliveryPossibility"

    RegionDeliveryPossibility:
      type: object
      properties:
        deliveryMethod:
          description: "COURIER,PICKUP,CNC"
          type: string
          example: "PICKUP"
        operatorId:
          $ref: "#/components/schemas/OperatorId"
        operatorType:
          $ref: "#/components/schemas/OperatorType"
        maxDeliveryDays:
          type: integer
          ##
        logisticClass:
          type: array
          items:
            $ref: "#/components/schemas/LogisticClass"
        shipmentDate:
          $ref: "#/components/schemas/ShipmentDate"
        deliveryDate:
          $ref: "#/components/schemas/DeliveryDate"
        serviceItems:
          type: array
          items:
            $ref: "#/components/schemas/ServiceItem"
        paymentOptions:
          description: "Способы оплаты: PREPAY_ONLINE,CASH,BANK_CARDS"
          type: array
          items:
            type: string
            example: "PREPAY_ONLINE"

    Explain:
      type: boolean
      example: true
      description: "Включить в ответ объяснение расчета"

    Explain_:
      description: "Объяснение расчета"
      type: array
      items:
        example: "(   0/   0) 2021-10-11T09:59:52.146508+03:00:         определена дата отгрузки офера в 0 рабочий день: 2021-10-11T10:00+03:00,"
        type: string


    ShipmentCorrectionDays:
      description: "Кол-во дней корректировки отгрузки"
      example: 3
      type: integer

    ContentFlag:
      description: "контент-флаг"
      type: string
      example: "force_paid_delivery"

    OrderBefore:
      description: "Точка логистического сдвига"
      type: string
      example: "13:00"

    Price:
      description: "Цена"
      type: number
      example: 5090

    OfferId:
      description: "id заказа"
      type: string
      example: 2265667403

    MerchantId:
      description: "id мерчанта"
      type: string
      example: "3"

    LocationId:
      description: "id склада мерчанта"
      type: string
      example: "7"

    OperatorId:
      description: "id оператора"
      type: string
      example: "PICKPOINT#PVZ"

    OperatorType:
      description: "CND,DELIVERY_BY_MERCHANT"
      type: string

    CalculationDate:
      description: "Дата расчета"
      type: string
      example: "2021-09-13T15:57:27+03:00"

    DeliveryDate:
      description: "Дата доставки"
      type: string
      example: "2021-09-13T15:57:27+03:00"

    ShipmentDate:
      description: "Дата регистрации на СЦ"
      type: string
      example: "2021-09-13T15:57:27+03:00"

    TransitShipmentDate:
      description: "Дата отгрузки доставки с сортировочного центра"
      type: string
      example: "2021-04-01T17:00:00+03:00"

    LogisticClass:
      description: "Логистический тег"
      type: string
      example: "KGT"

    RegionCode:
      description: "Код региона"
      type: string
      example: "reg_50"


    SettingsVersionRequest:
      type: object
      properties:
        meta:
          $ref: '#/components/schemas/Meta'
        data:
          type: object
          properties:
            tmsSettingIndexName:
              type: string
              example: "tms_setting_index_v1"
              description: "Индекс с настройками"

    SettingsVersionResponse:
      type: object
      properties:
        success:
          description: "1-успех, 0-неуспех"
          type: integer
          example: 1
        meta:
          $ref: '#/components/schemas/Meta_'
        data:
          $ref: '#/components/schemas/SettingsDataV1'

    SettingsDataV1:
      type: object
      properties:
        dataSources:
          $ref: '#/components/schemas/DataSourceUpdateResponse'

    DataSourceUpdateResponse:
      type: object
      properties:
        priceRuleIndex:
          description: ""
          type: string
          example: "tms_price_rule_index_v2"
        operatorRuleIndex:
          description: ""
          type: string
          example: "tms_operator_rule_index_v2"
        locationIndex:
          description: ""
          type: string
          example: "tms_location_index_v2"
        merchantIndex:
          description: ""
          type: string
          example: "tms_merchant_index_v2"
        regionIndex:
          description: ""
          type: string
          example: "tms_region_index_v2"
        resourceUtilizationIndex:
          description: ""
          type: string
          example: "tms_resource_utilization_v1"
        serviceItemIndex:
          description: ""
          type: string
          example: "tms_service_items_index_v2"
        tagIndex:
          description: ""
          type: string
          example: "tms_tag_index_v2"
        logisticTagIndex:
          description: ""
          type: string
          example: "tms_logistic_tag_index_v1"
        zoneIndex:
          description: ""
          type: string
          example: "tms_zone_index_v2"
        contentFlagIndex:
          description: ""
          type: string
          example: "tms_content_flags_index_v2"
        hubIndex:
          description: ""
          type: string
          example: "tms_hub_index_v2"
        agIndex:
          description: ""
          type: string
          example: "tms_ag_index_v1"
        itemIndex:
          description: ""
          type: string
          example: "item_index_v7"
        zoneIndexOverride:
          description: ""
          type: string
          example: null
        deliveryCostIndex:
          description: ""
          type: string
          example: "costcalculator_index_v1"